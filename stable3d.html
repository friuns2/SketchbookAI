<body>
  <script>
    
    
    const form = document.createElement('form');
    form.enctype = 'multipart/form-data';
    form.method = 'POST';
    form.action = "https://stabilityai-stable-fast-3d.hf.space/upload?upload_id=1u83ehotstd";

    const fileInput = document.createElement('input');
    fileInput.type = 'file';
    fileInput.name = 'files'; // Changed from 'file' to 'files'
    form.appendChild(fileInput);

    const submitButton = document.createElement('button');
    submitButton.type = 'submit';
    submitButton.textContent = 'Upload';
    form.appendChild(submitButton);

    document.body.appendChild(form);

    form.addEventListener('submit', async (event) => {
      event.preventDefault();
      const formData = new FormData(form);

      let filePaths = await fetch(form.action, {
        method: "POST",
        body: formData,
        headers: {
          "accept": "*/*",
          "accept-language": "en-US,en;q=0.9,ru;q=0.8",
          "cache-control": "no-cache",
          "pragma": "no-cache",
          "priority": "u=1, i",
          "sec-ch-ua": "\"Not)A;Brand\";v=\"99\", \"Google Chrome\";v=\"127\", \"Chromium\";v=\"127\"",
          "sec-ch-ua-mobile": "?0",
          "sec-ch-ua-platform": "\"Windows\"",
          "sec-fetch-dest": "empty",
          "sec-fetch-mode": "cors",
          "sec-fetch-site": "same-origin"
        },
        referrer: "https://stabilityai-stable-fast-3d.hf.space/?__theme=light",
        referrerPolicy: "strict-origin-when-cross-origin",
        mode: "cors",
        credentials: "include"
      }).then(a => a.json());

    let hash = Math.random().toString(36).substring(2, 11) + Math.random().toString(36).substring(2, 11);


      await fetch("https://stabilityai-stable-fast-3d.hf.space/queue/join?__theme=light", {
        "headers": {
          "accept": "*/*",
          "accept-language": "en-US,en;q=0.9,ru;q=0.8",
          "cache-control": "no-cache",
          "content-type": "application/json",
          "pragma": "no-cache",
          "priority": "u=1, i",
          "sec-ch-ua": "\"Not)A;Brand\";v=\"99\", \"Google Chrome\";v=\"127\", \"Chromium\";v=\"127\"",
          "sec-ch-ua-mobile": "?0",
          "sec-ch-ua-platform": "\"Windows\"",
          "sec-fetch-dest": "empty",
          "sec-fetch-mode": "cors",
          "sec-fetch-site": "same-origin"
        },
        "referrer": "https://stabilityai-stable-fast-3d.hf.space/?__theme=light",
        "referrerPolicy": "strict-origin-when-cross-origin",
        "body": JSON.stringify({
          data: [
            "Remove Background",
            {
              path: filePaths[0],
              url: "https://stabilityai-stable-fast-3d.hf.space/file=" + filePaths[0],
              orig_name: filePaths[0].split("/").pop(),
              size: formData.get('files').size,
              mime_type: "image/png",
              meta: {
                _type: "gradio.FileData"
              }
            },
            null,
            0.85
          ],
          event_data: null,
          fn_index: 5,
          trigger_id: 10,
          session_hash: hash
        }),
        "method": "POST",
        "mode": "cors",
        "credentials": "include"
      }).then(a => a.json());

      const response = await fetch("https://stabilityai-stable-fast-3d.hf.space/queue/data?session_hash=" + hash, {
        headers: {
          "accept": "text/event-stream",
          "accept-language": "en-US,en;q=0.9,ru;q=0.8",
          "cache-control": "no-cache",
          "pragma": "no-cache",
          "priority": "u=1, i",
          "sec-ch-ua": "\"Not)A;Brand\";v=\"99\", \"Google Chrome\";v=\"127\", \"Chromium\";v=\"127\"",
          "sec-ch-ua-mobile": "?0",
          "sec-ch-ua-platform": "\"Windows\"",
          "sec-fetch-dest": "empty",
          "sec-fetch-mode": "cors",
          "sec-fetch-site": "same-origin"
        }
      }).then(a => a.text());
      console.log(response);


      fetch("https://stabilityai-stable-fast-3d.hf.space/queue/join?__theme=light", {
  "headers": {
    "accept": "*/*",
    "accept-language": "en-US,en;q=0.9,ru;q=0.8",
    "cache-control": "no-cache",
    "content-type": "application/json",
    "pragma": "no-cache",
    "priority": "u=1, i",
    "sec-ch-ua": "\"Not)A;Brand\";v=\"99\", \"Google Chrome\";v=\"127\", \"Chromium\";v=\"127\"",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "\"Windows\"",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin"
  },
  "referrer": "https://stabilityai-stable-fast-3d.hf.space/?__theme=light",
  "referrerPolicy": "strict-origin-when-cross-origin",
  "body": JSON.stringify({
    data: [
      "Run",
      {
        path: filePaths[0],
        url: "https://stabilityai-stable-fast-3d.hf.space/file=" + filePaths[0],
        orig_name: filePaths[0].split("/").pop(),
        size: formData.get('files').size,
        mime_type: "image/png",
        meta: { _type: "gradio.FileData" }
      },
      null,
      0.85
    ],
    event_data: null,
    fn_index: 5,
    trigger_id: 10,
    session_hash: hash
  }),
  "method": "POST",
  "mode": "cors",
  "credentials": "include"
}).then(a => a.text());



      const response2 = await fetch("https://stabilityai-stable-fast-3d.hf.space/queue/data?session_hash=" + hash, {
        headers: {
          "accept": "text/event-stream",
          "accept-language": "en-US,en;q=0.9,ru;q=0.8",
          "cache-control": "no-cache",
          "pragma": "no-cache",
          "priority": "u=1, i",
          "sec-ch-ua": "\"Not)A;Brand\";v=\"99\", \"Google Chrome\";v=\"127\", \"Chromium\";v=\"127\"",
          "sec-ch-ua-mobile": "?0",
          "sec-ch-ua-platform": "\"Windows\"",
          "sec-fetch-dest": "empty",
          "sec-fetch-mode": "cors",
          "sec-fetch-site": "same-origin"
        }
      }).then(a => a.text());
      console.log(response2);









    });


    
  </script>
</body>